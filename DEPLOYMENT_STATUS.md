# TradingView Strategy Research Lab - ë°°í¬ í˜„í™©

> ìµœì¢… ì—…ë°ì´íŠ¸: 2025-12-25 05:10 KST

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ëª©ì 
TradingViewì—ì„œ Pine Script ì „ëµì„ ìë™ ìˆ˜ì§‘í•˜ê³ , AI ê¸°ë°˜ ë¶„ì„ì„ í†µí•´ í’ˆì§ˆì„ í‰ê°€í•˜ì—¬ ì‹¤ê±°ë˜ì— ì í•©í•œ ì „ëµì„ ì„ ë³„í•˜ëŠ” ì‹œìŠ¤í…œ

### 1.2 ì„œë²„ ì •ë³´
| í•­ëª© | ê°’ |
|------|-----|
| IP | `152.42.169.132` |
| OS | Ubuntu 22.04.5 LTS |
| ë””ìŠ¤í¬ | 25GB (ì‚¬ìš©: 17GB, ì—¬ìœ : **7.9GB - 32%**) |
| ë©”ëª¨ë¦¬ | ì‚¬ìš©ë¥  48% |
| í”„ë¡œì íŠ¸ ê²½ë¡œ | `/opt/strategy-research-lab` |

---

## 2. ì„œë¹„ìŠ¤ ìƒíƒœ

### 2.1 ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤

| ì„œë¹„ìŠ¤ | ìƒíƒœ | ì„¤ëª… |
|--------|------|------|
| `strategy-collector.service` | ğŸŸ¢ Active | TradingView ì „ëµ ìë™ ìˆ˜ì§‘ê¸° |
| `strategy-api.service` | ğŸŸ¢ Active | REST API ì„œë²„ (í¬íŠ¸ 8000) |
| `nginx.service` | ğŸŸ¢ Active | ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ |

### 2.2 API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | í˜„ì¬ ì‘ë‹µ |
|------------|------|----------|
| `/api/health` | í—¬ìŠ¤ì²´í¬ | `{"status":"healthy","database_exists":true}` |
| `/api/stats` | ìˆ˜ì§‘ í†µê³„ | `{"total_strategies":5,"analyzed_count":5,"avg_score":52.2}` |

---

## 3. ìˆ˜ì • ì™„ë£Œ í•­ëª©

### 3.1 ë²„ê·¸ ìˆ˜ì •

#### `repainting_result` ì†ì„± ì°¸ì¡° ì˜¤ë¥˜
- **íŒŒì¼**: `deploy/auto_collector.py:152`
- **ì›ì¸**: `FinalScore` í´ë˜ìŠ¤ì— `repainting_result` ì†ì„±ì´ ì—†ìŒ
- **ìˆ˜ì •**:
  ```python
  # Before (ì˜¤ë¥˜)
  score_result.repainting_result.risk_level if score_result.repainting_result else "unknown"

  # After (ìˆ˜ì •)
  score_result.repainting_analysis.get("risk_level", "unknown")
  ```

### 3.2 LLM ë¶„ì„ê¸° ë³€ê²½ (OpenAI â†’ Claude)

#### ë³€ê²½ëœ íŒŒì¼ë“¤

**`src/analyzer/llm/deep_analyzer.py`**
```python
# Before
from openai import AsyncOpenAI
self.client = AsyncOpenAI(api_key=api_key)
model = "gpt-4o"

# After
import anthropic
self.client = anthropic.AsyncAnthropic(api_key=api_key)
model = "claude-3-5-sonnet-20241022"
```

**`src/config.py`**
```python
# ì¶”ê°€ëœ ì„¤ì •
anthropic_api_key: Optional[str] = None
llm_model: str = "claude-3-5-sonnet-20241022"
```

**`.env`**
```env
# ë³€ê²½
ANTHROPIC_API_KEY=sk-ant-api03-...
LLM_MODEL=claude-3-5-sonnet-20241022
```

### 3.3 ëª¨ë¸ ë¹„ìš© ìµœì í™”

| ìš©ë„ | ëª¨ë¸ | ë¹„ìš© |
|------|------|------|
| ì‹¬ì¸µ ë¶„ì„ | `claude-3-5-sonnet-20241022` | ì¤‘ê°„ |
| ìš”ì•½ ìƒì„± | `claude-3-5-haiku-20241022` | ì €ë¹„ìš© |

---

## 4. ìˆ˜ì§‘ê¸° ì„¤ì •

### 4.1 í˜„ì¬ ì„¤ì •ê°’

| ì„¤ì • | ê°’ | ì„¤ëª… |
|------|-----|------|
| `max_strategies` | 30 | í•œ ì‚¬ì´í´ë‹¹ ìµœëŒ€ ìˆ˜ì§‘ ê°œìˆ˜ |
| `min_likes` | 500 | ìµœì†Œ ì¢‹ì•„ìš” ìˆ˜ í•„í„° |
| `max_pages` | 50 | ìµœëŒ€ ìŠ¤í¬ë˜í•‘ í˜ì´ì§€ |
| `headless` | true | ë¸Œë¼ìš°ì € í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ |

### 4.2 ìˆ˜ì§‘ ë¡œì§

1. TradingView Scripts í˜ì´ì§€ ì ‘ì†
2. "Strategies" í•„í„° ì ìš©
3. "Popularity" ì •ë ¬
4. í˜ì´ì§€ë³„ ì „ëµ ì¹´ë“œ ì¶”ì¶œ
5. ì¡°ê±´ í•„í„°ë§ (open source, min_likes)
6. **ì—°ì† 10í˜ì´ì§€ ì¡°ê±´ ë¯¸ì¶©ì¡± ì‹œ ìë™ ì¢…ë£Œ**
7. Pine Script ì½”ë“œ ì¶”ì¶œ
8. AI ë¶„ì„ ë° ì ìˆ˜ ì‚°ì¶œ

### 4.3 ìµœê·¼ ìˆ˜ì§‘ ë¡œê·¸

```
2025-12-24 20:09:03 - ìˆ˜ì§‘ ì‚¬ì´í´ ì‹œì‘
2025-12-24 20:09:33 - Page 1: 3 total strategies (+3)
2025-12-24 20:09:49 - Page 2: No qualifying strategies (empty streak: 1)
...
2025-12-24 20:08:03 - 10 consecutive pages without qualifying strategies. Stopping.
2025-12-24 20:08:04 - Scraping complete: 3 strategies collected
```

---

## 5. ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€

### 5.1 ì‹œìŠ¤í…œ Python (`/usr/bin/python3`)
```
anthropic
pydantic-settings
aiosqlite
aiofiles
aiohttp
playwright
```

### 5.2 venv (`/opt/strategy-research-lab/venv`)
```
anthropic
pydantic-settings
playwright
aiosqlite
aiofiles
aiohttp
pydantic
Jinja2
numpy
pandas
rich
typer
python-dotenv
psutil
httpx
tenacity
```

---

## 6. ë””ìŠ¤í¬ ì •ë¦¬ ë‚´ì—­

### ì •ë¦¬ ì „í›„ ë¹„êµ

| í•­ëª© | ì •ë¦¬ ì „ | ì •ë¦¬ í›„ |
|------|---------|---------|
| ì‚¬ìš©ë¥  | 75% | **68%** |
| ì—¬ìœ  ê³µê°„ | 6.2GB | **7.9GB** |
| í™•ë³´ ìš©ëŸ‰ | - | **1.7GB** |

### ì‚­ì œëœ íŒŒì¼

| íŒŒì¼/ê²½ë¡œ | í¬ê¸° | ì„¤ëª… |
|-----------|------|------|
| `/opt/sources.tar.gz` | 1.4GB | ì†ŒìŠ¤ ë°±ì—… |
| `/opt/frequi-fixed.tar.gz` | 160MB | FreqUI ì••ì¶• íŒŒì¼ |
| `/opt/deploy.tar.gz` | 16KB | ë°°í¬ íŒŒì¼ |
| `._*` íŒŒì¼ë“¤ | ~ìˆ˜ì‹­KB | macOS ë©”íƒ€ë°ì´í„° |
| `/root/.cache/pip` | 290MB | pip ìºì‹œ |
| `/tmp/*.tar.gz` | ~100KB | ì„ì‹œ íŒŒì¼ |

---

## 7. ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Nginx (80/443)                        â”‚
â”‚                      ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  strategy-api.service                        â”‚
â”‚                 FastAPI + Uvicorn (8000)                     â”‚
â”‚                                                              â”‚
â”‚  /api/health    /api/stats    /api/strategies                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SQLite Database                         â”‚
â”‚                   data/strategies.db                         â”‚
â”‚                                                              â”‚
â”‚  strategies (5ê±´) â”‚ pine_codes â”‚ analysis_results            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               strategy-collector.service                     â”‚
â”‚                    (systemd, ì—°ì† ì‹¤í–‰)                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Playwright  â”‚â†’ â”‚  Scraper     â”‚â†’ â”‚  Analyzer    â”‚       â”‚
â”‚  â”‚  (Chromium)  â”‚  â”‚  (ìˆ˜ì§‘)       â”‚  â”‚  (ë¶„ì„)       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                              â”‚               â”‚
â”‚                                              â–¼               â”‚
â”‚                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚                                     â”‚  Claude API  â”‚        â”‚
â”‚                                     â”‚  (Anthropic) â”‚        â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. íŒŒì¼ êµ¬ì¡°

```
/opt/strategy-research-lab/
â”œâ”€â”€ .env                          # í™˜ê²½ë³€ìˆ˜ (ANTHROPIC_API_KEY)
â”œâ”€â”€ api/
â”‚   â””â”€â”€ server.py                 # FastAPI ì„œë²„
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ strategies.db             # SQLite ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ beginner_report.html      # ìƒì„±ëœ ë¦¬í¬íŠ¸
â”‚   â””â”€â”€ converted/                # ë³€í™˜ëœ Python ì „ëµ
â”œâ”€â”€ deploy/
â”‚   â”œâ”€â”€ auto_collector.py         # ìë™ ìˆ˜ì§‘ê¸° ë©”ì¸
â”‚   â”œâ”€â”€ strategy-collector.service
â”‚   â”œâ”€â”€ strategy-api.service
â”‚   â””â”€â”€ setup_server.sh
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ auto_collect_*.log        # ìˆ˜ì§‘ê¸° ë¡œê·¸
â”‚   â””â”€â”€ run.log
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ analyzer/
â”‚   â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”‚   â”œâ”€â”€ deep_analyzer.py  # Claude API ì—°ë™ âœ… ìˆ˜ì •ë¨
â”‚   â”‚   â”‚   â””â”€â”€ prompts.py
â”‚   â”‚   â”œâ”€â”€ rule_based/
â”‚   â”‚   â”‚   â”œâ”€â”€ repainting_detector.py
â”‚   â”‚   â”‚   â”œâ”€â”€ overfitting_detector.py
â”‚   â”‚   â”‚   â””â”€â”€ risk_checker.py
â”‚   â”‚   â””â”€â”€ scorer.py             # ì¢…í•© ì ìˆ˜ ì‚°ì¶œ
â”‚   â”œâ”€â”€ collector/
â”‚   â”‚   â”œâ”€â”€ scripts_scraper.py    # TradingView ìŠ¤í¬ë˜í¼
â”‚   â”‚   â””â”€â”€ pine_fetcher.py
â”‚   â”œâ”€â”€ config.py                 # ì„¤ì • ê´€ë¦¬ âœ… ìˆ˜ì •ë¨
â”‚   â”œâ”€â”€ converter/
â”‚   â”‚   â””â”€â”€ pine_to_python.py
â”‚   â””â”€â”€ storage/
â”‚       â””â”€â”€ database.py
â”œâ”€â”€ venv/                         # Python ê°€ìƒí™˜ê²½
â””â”€â”€ requirements.txt
```

---

## 9. ì•Œë ¤ì§„ ì´ìŠˆ ë° ê°œì„  ì‚¬í•­

### 9.1 í˜„ì¬ ì´ìŠˆ

| ì´ìŠˆ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| min_likes 500 ì¡°ê±´ | âš ï¸ ì°¸ê³  | ëŒ€ë¶€ë¶„ í˜ì´ì§€ì—ì„œ ì¡°ê±´ ë¯¸ì¶©ì¡±ìœ¼ë¡œ ìˆ˜ì§‘ëŸ‰ ì ìŒ |
| ì—°ì† ë¹ˆ í˜ì´ì§€ ì¢…ë£Œ | âœ… ì •ìƒ | 10í˜ì´ì§€ ì—°ì† ë¹ˆ ê²°ê³¼ ì‹œ íš¨ìœ¨ì  ì¢…ë£Œ |

### 9.2 í–¥í›„ ê°œì„  ê°€ëŠ¥ ì‚¬í•­

1. **ìˆ˜ì§‘ ì¡°ê±´ ì¡°ì •**: `min_likes`ë¥¼ 200~300ìœ¼ë¡œ ë‚®ì¶”ë©´ ë” ë§ì€ ì „ëµ ìˆ˜ì§‘ ê°€ëŠ¥
2. **ìŠ¤ì¼€ì¤„ë§**: systemd timer ë˜ëŠ” cronìœ¼ë¡œ ì£¼ê¸°ì  ì‹¤í–‰ ì„¤ì •
3. **ëª¨ë‹ˆí„°ë§**: Prometheus/Grafana ì—°ë™ìœ¼ë¡œ ìˆ˜ì§‘ í˜„í™© ëŒ€ì‹œë³´ë“œ êµ¬ì¶•
4. **ì•Œë¦¼**: ê³ ë“ì  ì „ëµ ë°œê²¬ ì‹œ Slack/Telegram ì•Œë¦¼

---

## 10. ìš´ì˜ ëª…ë ¹ì–´

### ì„œë¹„ìŠ¤ ê´€ë¦¬
```bash
# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
systemctl status strategy-collector strategy-api nginx

# ìˆ˜ì§‘ê¸° ì¬ì‹œì‘
systemctl restart strategy-collector

# API ì„œë²„ ì¬ì‹œì‘
systemctl restart strategy-api

# ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
journalctl -u strategy-collector -f
tail -f /opt/strategy-research-lab/logs/auto_collect_*.log
```

### ë°ì´í„° í™•ì¸
```bash
# API í†µê³„ ì¡°íšŒ
curl http://localhost:8000/api/stats

# ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ì¡°íšŒ
sqlite3 /opt/strategy-research-lab/data/strategies.db "SELECT COUNT(*) FROM strategies;"
```

### ë””ìŠ¤í¬ ê´€ë¦¬
```bash
# ìš©ëŸ‰ í™•ì¸
df -h /

# ë¡œê·¸ ì •ë¦¬ (30ì¼ ì´ìƒ)
find /opt/strategy-research-lab/logs -name "*.log" -mtime +30 -delete
```

---

## 11. ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| 2025-12-25 | `repainting_result` ë²„ê·¸ ìˆ˜ì • |
| 2025-12-25 | OpenAI â†’ Claude API ì „í™˜ |
| 2025-12-25 | venvì— anthropic íŒ¨í‚¤ì§€ ì„¤ì¹˜ |
| 2025-12-25 | ë””ìŠ¤í¬ ì •ë¦¬ (1.7GB í™•ë³´) |
| 2025-12-25 | ëª¨ë“  ì„œë¹„ìŠ¤ ì •ìƒ ì‘ë™ í™•ì¸ |

---

## 12. ì—°ë½ì²˜

- **ì„œë²„ ì ‘ì†**: `ssh root@152.42.169.132`
- **API ì ‘ì†**: `http://152.42.169.132/api/`
- **ë¡œê·¸ ìœ„ì¹˜**: `/opt/strategy-research-lab/logs/`
